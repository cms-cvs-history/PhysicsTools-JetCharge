process chargeAnalysis = {
    include "FWCore/MessageService/data/MessageLogger.cfi"

    source = PoolSource {
        untracked vstring fileNames = {
            '/store/RelVal/2007/6/4/RelVal-RelVal150pre5TTbar-1180981428/0000/8EA0C740-0513-DC11-8880-001731AF684D.root',
            '/store/RelVal/2007/6/4/RelVal-RelVal150pre5TTbar-1180981428/0000/B4FA23F0-0013-DC11-BFAD-003048767D3D.root',
            '/store/RelVal/2007/6/4/RelVal-RelVal150pre5TTbar-1180981428/0000/FAFA7ECB-3813-DC11-8942-00304875AB59.root'
            #'file:ttbar.root'
        }
    }

    untracked PSet maxEvents = { untracked int32 input = -1 }

    //// ===== REQUIRE 8 HITS (no ghost tracks) =================
    module trackWithVertexSelector8Hits = trackWithVertexSelector 
                                          from "PhysicsTools/RecoSelectors/data/TrackWithVertexSelector.cfi"
        replace trackWithVertexSelector8Hits.useVtx = false
    module jetTrackAssociator8Hits = jetTracksAssociator from "RecoBTau/JetTracksAssociator/data/jetTracksAssociator.cfi"
        replace jetTrackAssociator8Hits.tracks = trackWithVertexSelector8Hits

    //// ====== JET CHARGE PRODUCERS ================
    ///  1) Unit weight
    module jetChargeProducerByUnit  = jetChargeProducer   from "PhysicsTools/JetCharge/data/JetChargeProducer.cfi"
        replace jetChargeProducerByUnit.src = jetTrackAssociator8Hits
        replace jetChargeProducerByUnit.var = "Unit"
    module jetChargeAnalyzerByUnit  = jetChargeAnalyzer   from "PhysicsTools/JetCharge/test/JetChargeAnalyzer.cfi"
        replace jetChargeAnalyzerByUnit.src = jetChargeProducerByUnit
        replace jetChargeAnalyzerByUnit.dir = "ByUnit"
    ///  1) using Pt
    module jetChargeProducerByPt  = jetChargeProducer   from "PhysicsTools/JetCharge/data/JetChargeProducer.cfi"
        replace jetChargeProducerByPt.src = jetTrackAssociator8Hits
        replace jetChargeProducerByPt.var = "Pt"
    module jetChargeAnalyzerByPt  = jetChargeAnalyzer   from "PhysicsTools/JetCharge/test/JetChargeAnalyzer.cfi"
        replace jetChargeAnalyzerByPt.src = jetChargeProducerByPt
        replace jetChargeAnalyzerByPt.dir = "ByPt"
    ///  1b) using Pt ^ 0.5
    module jetChargeProducerByPt05  = jetChargeProducer   from "PhysicsTools/JetCharge/data/JetChargeProducer.cfi"
        replace jetChargeProducerByPt05.src = jetTrackAssociator8Hits
        replace jetChargeProducerByPt05.var = "Pt"
        replace jetChargeProducerByPt05.exp=  0.5
    module jetChargeAnalyzerByPt05  = jetChargeAnalyzer   from "PhysicsTools/JetCharge/test/JetChargeAnalyzer.cfi"
        replace jetChargeAnalyzerByPt05.src = jetChargeProducerByPt05
        replace jetChargeAnalyzerByPt05.dir = "ByPt05"
    ///  1c) using Pt ^ 0.25
    module jetChargeProducerByPt025  = jetChargeProducer   from "PhysicsTools/JetCharge/data/JetChargeProducer.cfi"
        replace jetChargeProducerByPt025.src = jetTrackAssociator8Hits
        replace jetChargeProducerByPt025.var = "Pt"
        replace jetChargeProducerByPt025.exp=  0.25
    module jetChargeAnalyzerByPt025  = jetChargeAnalyzer   from "PhysicsTools/JetCharge/test/JetChargeAnalyzer.cfi"
        replace jetChargeAnalyzerByPt025.src = jetChargeProducerByPt025
        replace jetChargeAnalyzerByPt025.dir = "ByPt025"
    ///  2) using PtRel
    module jetChargeProducerByPtRel  = jetChargeProducer   from "PhysicsTools/JetCharge/data/JetChargeProducer.cfi"
        replace jetChargeProducerByPtRel.src = jetTrackAssociator8Hits
        replace jetChargeProducerByPtRel.var = "PtRel"
    module jetChargeAnalyzerByPtRel  = jetChargeAnalyzer   from "PhysicsTools/JetCharge/test/JetChargeAnalyzer.cfi"
        replace jetChargeAnalyzerByPtRel.src = jetChargeProducerByPtRel
        replace jetChargeAnalyzerByPtRel.dir = "ByPtRel"
    ///  3) using RelEta
    module jetChargeProducerByRelEta  = jetChargeProducer   from "PhysicsTools/JetCharge/data/JetChargeProducer.cfi"
        replace jetChargeProducerByRelEta.src = jetTrackAssociator8Hits
        replace jetChargeProducerByRelEta.var = "RelEta"
    module jetChargeAnalyzerByRelEta  = jetChargeAnalyzer   from "PhysicsTools/JetCharge/test/JetChargeAnalyzer.cfi"
        replace jetChargeAnalyzerByRelEta.src = jetChargeProducerByRelEta
        replace jetChargeAnalyzerByRelEta.dir = "ByRelEta"
    ///  4) using DeltaR inverse
    module jetChargeProducerByDeltaR  = jetChargeProducer   from "PhysicsTools/JetCharge/data/JetChargeProducer.cfi"
        replace jetChargeProducerByDeltaR.src = jetTrackAssociator8Hits
        replace jetChargeProducerByDeltaR.var = "DeltaR"
        replace jetChargeProducerByDeltaR.exp = -1.0
    module jetChargeAnalyzerByDeltaR  = jetChargeAnalyzer   from "PhysicsTools/JetCharge/test/JetChargeAnalyzer.cfi"
        replace jetChargeAnalyzerByDeltaR.src = jetChargeProducerByDeltaR
        replace jetChargeAnalyzerByDeltaR.dir = "ByDeltaR"


    service = TFileService { string fileName = "multiPlots.root" }

    sequence producers  = { trackWithVertexSelector8Hits, jetTrackAssociator8Hits }
    sequence charges = { 
        jetChargeProducerByUnit,jetChargeAnalyzerByUnit,
        jetChargeProducerByPt,jetChargeAnalyzerByPt,
        jetChargeProducerByPt05,jetChargeAnalyzerByPt05,
        jetChargeProducerByPt025,jetChargeAnalyzerByPt025,
        jetChargeProducerByRelEta,jetChargeAnalyzerByRelEta,
        jetChargeProducerByDeltaR,jetChargeAnalyzerByDeltaR
    }
    path p = { producers, charges }
    untracked PSet options = { untracked bool wantSummary = true }
}
